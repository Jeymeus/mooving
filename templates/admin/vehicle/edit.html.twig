{% extends 'admin/admin.html.twig' %}

{% block javascripts %}
    <script src="{{ asset('js/delete.js') }}"></script>
{% endblock %}


{% block title %}Modification d'un véhicule{% endblock %}

{% block body %}
    <h1 class="mt-3 mb-3">Modification d'un véhicule</h1>

    {{ form_start(form) }}
    <div class="form-group">
        {{ form_label(form.brand, 'Marque') }}
        {{ form_widget(form.brand, {'attr': {'class': 'form-control' ~ (form.brand.vars.errors|length > 0 ? ' is-invalid' : '')}}) }}
        {% if form.brand.vars.errors|length > 0 %}
            <div class="invalid-feedback">
                {{ form_errors(form.brand) }}
            </div>
        {% endif %}
    </div>
    <div class="form-group">
        {{ form_label(form.model, 'Modèle') }}
        {{ form_widget(form.model, {'attr': {'class': 'form-control' ~ (form.model.vars.errors|length > 0 ? ' is-invalid' : '')}}) }}
        {% if form.model.vars.errors|length > 0 %}
            <div class="invalid-feedback">
                {{ form_errors(form.model) }}
            </div>
        {% endif %}
    </div>

    <h3>Images existantes</h3>
    <div class="form-group">
        {% for image in vehicle.images %}
        <d!iv>
            <img src="{{ asset('uploads/' ~ image.fileName) }}" alt="{{ image.fileName }}" width="100">
            <a href="{{ path('admin_vehicle_delete_image', {id: image.id}) }}" data-delete data-token= "{{ csrf_token('delete' ~ image.id) }}" class="btn btn-danger">Supprimer</a>
        </d!iv>
        {% endfor %}
    </div>

    <div class="form-group">
        {{ form_label(form.images, 'Ajouter des images') }}
        {{ form_widget(form.images, {'attr': {'class': 'form-control' ~ (form.images.vars.errors|length > 0 ? ' is-invalid' : '')}}) }}
        {% if form.images.vars.errors|length > 0 %}
            <div class="invalid-feedback">
                {{ form_errors(form.images) }}
            </div>
        {% endif %}
    </div>

    <button type="submit" class="btn btn-warning mt-3">Modifier</button>
    {{ form_end(form) }}
{% endblock %}
